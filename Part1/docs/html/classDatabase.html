<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DOCS: Database Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">DOCS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classDatabase-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Database Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Manages data storage and retrieval, supporting operations like compaction, flushing, and concurrency control.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="database_8h_source.html">database.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Database:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classDatabase.png" usemap="#Database_map" alt=""/>
  <map id="Database_map" name="Database_map">
<area href="classREPL.html" title="A class derived from Database that implements basic REPL operations (GET, SET, DELETE) for the key-va..." alt="REPL" shape="rect" coords="0,56,65,80"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:aae3bec471572392290a4fddb4aea5c8d" id="r_aae3bec471572392290a4fddb4aea5c8d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aae3bec471572392290a4fddb4aea5c8d">Find</a> (int tier, int index, string &amp;key, string &amp;value)</td></tr>
<tr class="memdesc:aae3bec471572392290a4fddb4aea5c8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Searches for a key in the database.  <br /></td></tr>
<tr class="separator:aae3bec471572392290a4fddb4aea5c8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8dea3456407995ff774ae36f0fbcbb30" id="r_a8dea3456407995ff774ae36f0fbcbb30"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8dea3456407995ff774ae36f0fbcbb30">binary_search</a> (ifstream &amp;In, ifstream &amp;secondary, size_t entries, string &amp;key, string &amp;value)</td></tr>
<tr class="memdesc:a8dea3456407995ff774ae36f0fbcbb30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a binary search within a file stream for a given key.  <br /></td></tr>
<tr class="separator:a8dea3456407995ff774ae36f0fbcbb30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96401acdb58036ac556ca4be9068898c" id="r_a96401acdb58036ac556ca4be9068898c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a96401acdb58036ac556ca4be9068898c">compact_main</a> ()</td></tr>
<tr class="memdesc:a96401acdb58036ac556ca4be9068898c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main compaction process.  <br /></td></tr>
<tr class="separator:a96401acdb58036ac556ca4be9068898c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3893e2b916c8502668e4014910574a6" id="r_ac3893e2b916c8502668e4014910574a6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac3893e2b916c8502668e4014910574a6">FLUSH</a> ()</td></tr>
<tr class="memdesc:ac3893e2b916c8502668e4014910574a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flushes the in-memory table to SSTable storage.  <br /></td></tr>
<tr class="separator:ac3893e2b916c8502668e4014910574a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4703c80e6969d33565ea340f768fdadf" id="r_a4703c80e6969d33565ea340f768fdadf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4703c80e6969d33565ea340f768fdadf">Database</a> ()</td></tr>
<tr class="memdesc:a4703c80e6969d33565ea340f768fdadf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor for the <a class="el" href="classDatabase.html" title="Manages data storage and retrieval, supporting operations like compaction, flushing,...">Database</a> class.  <br /></td></tr>
<tr class="separator:a4703c80e6969d33565ea340f768fdadf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84d399a2ad58d69daab9b05330e1316d" id="r_a84d399a2ad58d69daab9b05330e1316d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a84d399a2ad58d69daab9b05330e1316d">~Database</a> ()</td></tr>
<tr class="memdesc:a84d399a2ad58d69daab9b05330e1316d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor for the <a class="el" href="classDatabase.html" title="Manages data storage and retrieval, supporting operations like compaction, flushing,...">Database</a> class.  <br /></td></tr>
<tr class="separator:a84d399a2ad58d69daab9b05330e1316d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d5023c6cbe44ef7158e80590a3e1ed2" id="r_a3d5023c6cbe44ef7158e80590a3e1ed2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3d5023c6cbe44ef7158e80590a3e1ed2">Rename</a> (path &amp;oldPath, path &amp;newPath, int tier)</td></tr>
<tr class="memdesc:a3d5023c6cbe44ef7158e80590a3e1ed2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Renames files based on the nomenclature of the specified tier.  <br /></td></tr>
<tr class="separator:a3d5023c6cbe44ef7158e80590a3e1ed2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9cfeee48e9e93c6360514ec6f6f9ddb" id="r_ab9cfeee48e9e93c6360514ec6f6f9ddb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab9cfeee48e9e93c6360514ec6f6f9ddb">compact</a> (int tier)</td></tr>
<tr class="memdesc:ab9cfeee48e9e93c6360514ec6f6f9ddb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs compaction on a specific tier.  <br /></td></tr>
<tr class="separator:ab9cfeee48e9e93c6360514ec6f6f9ddb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2684d861b0f4d1accce7fdef3cd4c7c5" id="r_a2684d861b0f4d1accce7fdef3cd4c7c5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2684d861b0f4d1accce7fdef3cd4c7c5">write_lock</a> (int tier)</td></tr>
<tr class="memdesc:a2684d861b0f4d1accce7fdef3cd4c7c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Locks the i-th tier for writing.  <br /></td></tr>
<tr class="separator:a2684d861b0f4d1accce7fdef3cd4c7c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab503f896cf02040888e0dd41e6b0ad52" id="r_ab503f896cf02040888e0dd41e6b0ad52"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab503f896cf02040888e0dd41e6b0ad52">write_unlock</a> (int tier)</td></tr>
<tr class="memdesc:ab503f896cf02040888e0dd41e6b0ad52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlocks the i-th tier for writing.  <br /></td></tr>
<tr class="separator:ab503f896cf02040888e0dd41e6b0ad52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58f41f1cfa2f8a7d88521c421cf4193b" id="r_a58f41f1cfa2f8a7d88521c421cf4193b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a58f41f1cfa2f8a7d88521c421cf4193b">read_lock</a> (int tier)</td></tr>
<tr class="memdesc:a58f41f1cfa2f8a7d88521c421cf4193b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Locks the i-th tier for reading.  <br /></td></tr>
<tr class="separator:a58f41f1cfa2f8a7d88521c421cf4193b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeccfa14ac4500da2405b2e495612a8b1" id="r_aeccfa14ac4500da2405b2e495612a8b1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aeccfa14ac4500da2405b2e495612a8b1">read_unlock</a> (int tier)</td></tr>
<tr class="memdesc:aeccfa14ac4500da2405b2e495612a8b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlocks the i-th tier for reading.  <br /></td></tr>
<tr class="separator:aeccfa14ac4500da2405b2e495612a8b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b3c4d2265b869b532b9c71377fb47a9" id="r_a5b3c4d2265b869b532b9c71377fb47a9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5b3c4d2265b869b532b9c71377fb47a9">merge_lock</a> (int tier)</td></tr>
<tr class="memdesc:a5b3c4d2265b869b532b9c71377fb47a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Locks the i-th tier for merging data.  <br /></td></tr>
<tr class="separator:a5b3c4d2265b869b532b9c71377fb47a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae227b971e349f1f7eef1cfee82ab3228" id="r_ae227b971e349f1f7eef1cfee82ab3228"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae227b971e349f1f7eef1cfee82ab3228">merge_unlock</a> (int tier)</td></tr>
<tr class="memdesc:ae227b971e349f1f7eef1cfee82ab3228"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlocks the i-th tier after merging data.  <br /></td></tr>
<tr class="separator:ae227b971e349f1f7eef1cfee82ab3228"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c7cad2d7102a8e5ff480355e5b90ebf" id="r_a0c7cad2d7102a8e5ff480355e5b90ebf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0c7cad2d7102a8e5ff480355e5b90ebf">get_folder</a> (int tier, path &amp;dir)</td></tr>
<tr class="memdesc:a0c7cad2d7102a8e5ff480355e5b90ebf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the path to a specific tier directory. Creates it if it doesn't exist.  <br /></td></tr>
<tr class="separator:a0c7cad2d7102a8e5ff480355e5b90ebf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0c20552e3b19756fe3232fc7c29a6cd" id="r_af0c20552e3b19756fe3232fc7c29a6cd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af0c20552e3b19756fe3232fc7c29a6cd">initialize_folder</a> (int tier)</td></tr>
<tr class="memdesc:af0c20552e3b19756fe3232fc7c29a6cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes variables based on the data in a tier during database initialization.  <br /></td></tr>
<tr class="separator:af0c20552e3b19756fe3232fc7c29a6cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4fce4cd4bc90cfec102ffaef5d54ba9" id="r_ac4fce4cd4bc90cfec102ffaef5d54ba9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac4fce4cd4bc90cfec102ffaef5d54ba9">initialize_memtable</a> ()</td></tr>
<tr class="memdesc:ac4fce4cd4bc90cfec102ffaef5d54ba9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the in-memory table using the WAL.  <br /></td></tr>
<tr class="separator:ac4fce4cd4bc90cfec102ffaef5d54ba9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae03669ca94ae3523dfbe84e796323df6" id="r_ae03669ca94ae3523dfbe84e796323df6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae03669ca94ae3523dfbe84e796323df6">append_to_WAL</a> (string &amp;key, string &amp;value)</td></tr>
<tr class="memdesc:ae03669ca94ae3523dfbe84e796323df6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Appends a key-value pair to the WAL.  <br /></td></tr>
<tr class="separator:ae03669ca94ae3523dfbe84e796323df6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b359ece40bb8fd13f0f4b378805089d" id="r_a6b359ece40bb8fd13f0f4b378805089d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6b359ece40bb8fd13f0f4b378805089d">initialize_filter</a> (int tier, vector&lt; <a class="el" href="classBloomFilter.html">BloomFilter</a> &gt; &amp;filter, path &amp;dir)</td></tr>
<tr class="memdesc:a6b359ece40bb8fd13f0f4b378805089d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the Bloom filters for a tier based on its data.  <br /></td></tr>
<tr class="separator:a6b359ece40bb8fd13f0f4b378805089d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3eb3a515e35ec6e84763504785b410fd" id="r_a3eb3a515e35ec6e84763504785b410fd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3eb3a515e35ec6e84763504785b410fd">push_semaphores</a> ()</td></tr>
<tr class="memdesc:a3eb3a515e35ec6e84763504785b410fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pushes semaphore configurations for new tiers and threads.  <br /></td></tr>
<tr class="separator:a3eb3a515e35ec6e84763504785b410fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a0813cbbe0fc42abe6666508941348702" id="r_a0813cbbe0fc42abe6666508941348702"><td class="memItemLeft" align="right" valign="top"><a id="a0813cbbe0fc42abe6666508941348702" name="a0813cbbe0fc42abe6666508941348702"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>flushid</b></td></tr>
<tr class="separator:a0813cbbe0fc42abe6666508941348702"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d9f4807f5a8f39f545a4fe62cccaa1e" id="r_a4d9f4807f5a8f39f545a4fe62cccaa1e"><td class="memItemLeft" align="right" valign="top"><a id="a4d9f4807f5a8f39f545a4fe62cccaa1e" name="a4d9f4807f5a8f39f545a4fe62cccaa1e"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>compactid</b></td></tr>
<tr class="memdesc:a4d9f4807f5a8f39f545a4fe62cccaa1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">IDs for flush and compaction semaphores. <br /></td></tr>
<tr class="separator:a4d9f4807f5a8f39f545a4fe62cccaa1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d0cc9996c9d24721b7d0da2aab26d63" id="r_a8d0cc9996c9d24721b7d0da2aab26d63"><td class="memItemLeft" align="right" valign="top"><a id="a8d0cc9996c9d24721b7d0da2aab26d63" name="a8d0cc9996c9d24721b7d0da2aab26d63"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>destroy</b></td></tr>
<tr class="memdesc:a8d0cc9996c9d24721b7d0da2aab26d63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates whether the database is being destroyed. <br /></td></tr>
<tr class="separator:a8d0cc9996c9d24721b7d0da2aab26d63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12baae7be265887bc2a79107c53183e1" id="r_a12baae7be265887bc2a79107c53183e1"><td class="memItemLeft" align="right" valign="top"><a id="a12baae7be265887bc2a79107c53183e1" name="a12baae7be265887bc2a79107c53183e1"></a>
vector&lt; vector&lt; <a class="el" href="classBloomFilter.html">BloomFilter</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>filters</b></td></tr>
<tr class="memdesc:a12baae7be265887bc2a79107c53183e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bloom filters for different tiers. <br /></td></tr>
<tr class="separator:a12baae7be265887bc2a79107c53183e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedb078c0bcad7dc577fe3eb1f71b5653" id="r_aedb078c0bcad7dc577fe3eb1f71b5653"><td class="memItemLeft" align="right" valign="top"><a id="aedb078c0bcad7dc577fe3eb1f71b5653" name="aedb078c0bcad7dc577fe3eb1f71b5653"></a>
ofstream&#160;</td><td class="memItemRight" valign="bottom"><b>wal</b></td></tr>
<tr class="memdesc:aedb078c0bcad7dc577fe3eb1f71b5653"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write-ahead log (WAL) file stream. <br /></td></tr>
<tr class="separator:aedb078c0bcad7dc577fe3eb1f71b5653"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e3f3a2cf1d61833cd2ebf7ae1e7a76e" id="r_a3e3f3a2cf1d61833cd2ebf7ae1e7a76e"><td class="memItemLeft" align="right" valign="top"><a id="a3e3f3a2cf1d61833cd2ebf7ae1e7a76e" name="a3e3f3a2cf1d61833cd2ebf7ae1e7a76e"></a>
map&lt; string, string &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>memtable</b></td></tr>
<tr class="memdesc:a3e3f3a2cf1d61833cd2ebf7ae1e7a76e"><td class="mdescLeft">&#160;</td><td class="mdescRight">In-memory key-value storage. <br /></td></tr>
<tr class="separator:a3e3f3a2cf1d61833cd2ebf7ae1e7a76e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a107464f3fbc23c2c01278151b3ea78" id="r_a4a107464f3fbc23c2c01278151b3ea78"><td class="memItemLeft" align="right" valign="top"><a id="a4a107464f3fbc23c2c01278151b3ea78" name="a4a107464f3fbc23c2c01278151b3ea78"></a>
vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>levels_main</b></td></tr>
<tr class="memdesc:a4a107464f3fbc23c2c01278151b3ea78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores the number of data files in Tier_i. <br /></td></tr>
<tr class="separator:a4a107464f3fbc23c2c01278151b3ea78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25e281011cf1bfc2e41fa3823454df9c" id="r_a25e281011cf1bfc2e41fa3823454df9c"><td class="memItemLeft" align="right" valign="top"><a id="a25e281011cf1bfc2e41fa3823454df9c" name="a25e281011cf1bfc2e41fa3823454df9c"></a>
size_t&#160;</td><td class="memItemRight" valign="bottom"><b>mem_size</b></td></tr>
<tr class="memdesc:a25e281011cf1bfc2e41fa3823454df9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size of the in-memory table. <br /></td></tr>
<tr class="separator:a25e281011cf1bfc2e41fa3823454df9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1eb490c514d3b4c6d3a2fb17a8b176bd" id="r_a1eb490c514d3b4c6d3a2fb17a8b176bd"><td class="memItemLeft" align="right" valign="top"><a id="a1eb490c514d3b4c6d3a2fb17a8b176bd" name="a1eb490c514d3b4c6d3a2fb17a8b176bd"></a>
vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>semids</b></td></tr>
<tr class="separator:a1eb490c514d3b4c6d3a2fb17a8b176bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ca4881ee16ecd1fff00e47066bfe76b" id="r_a1ca4881ee16ecd1fff00e47066bfe76b"><td class="memItemLeft" align="right" valign="top"><a id="a1ca4881ee16ecd1fff00e47066bfe76b" name="a1ca4881ee16ecd1fff00e47066bfe76b"></a>
vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>wsemids</b></td></tr>
<tr class="separator:a1ca4881ee16ecd1fff00e47066bfe76b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8198db1852612eb4b405f1e0ae7e214d" id="r_a8198db1852612eb4b405f1e0ae7e214d"><td class="memItemLeft" align="right" valign="top"><a id="a8198db1852612eb4b405f1e0ae7e214d" name="a8198db1852612eb4b405f1e0ae7e214d"></a>
vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>wcount</b></td></tr>
<tr class="separator:a8198db1852612eb4b405f1e0ae7e214d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dfd3aa6ccee70512b7a51ca01d1fd0a" id="r_a3dfd3aa6ccee70512b7a51ca01d1fd0a"><td class="memItemLeft" align="right" valign="top"><a id="a3dfd3aa6ccee70512b7a51ca01d1fd0a" name="a3dfd3aa6ccee70512b7a51ca01d1fd0a"></a>
vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>rcount</b></td></tr>
<tr class="separator:a3dfd3aa6ccee70512b7a51ca01d1fd0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acebfc614ec8dabcd1e64ba5aac9fafb9" id="r_acebfc614ec8dabcd1e64ba5aac9fafb9"><td class="memItemLeft" align="right" valign="top"><a id="acebfc614ec8dabcd1e64ba5aac9fafb9" name="acebfc614ec8dabcd1e64ba5aac9fafb9"></a>
vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>reader</b></td></tr>
<tr class="separator:acebfc614ec8dabcd1e64ba5aac9fafb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11749c361f6a549f2b79d4a67ad06b2f" id="r_a11749c361f6a549f2b79d4a67ad06b2f"><td class="memItemLeft" align="right" valign="top"><a id="a11749c361f6a549f2b79d4a67ad06b2f" name="a11749c361f6a549f2b79d4a67ad06b2f"></a>
vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>writer</b></td></tr>
<tr class="separator:a11749c361f6a549f2b79d4a67ad06b2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dfc7a56b458200622eb090fb728e22e" id="r_a9dfc7a56b458200622eb090fb728e22e"><td class="memItemLeft" align="right" valign="top"><a id="a9dfc7a56b458200622eb090fb728e22e" name="a9dfc7a56b458200622eb090fb728e22e"></a>
vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>mtx</b></td></tr>
<tr class="memdesc:a9dfc7a56b458200622eb090fb728e22e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Semaphore and thread control variables. <br /></td></tr>
<tr class="separator:a9dfc7a56b458200622eb090fb728e22e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae601748dc672ec6bdc000ed7fd297845" id="r_ae601748dc672ec6bdc000ed7fd297845"><td class="memItemLeft" align="right" valign="top"><a id="ae601748dc672ec6bdc000ed7fd297845" name="ae601748dc672ec6bdc000ed7fd297845"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>flushrunning</b></td></tr>
<tr class="memdesc:ae601748dc672ec6bdc000ed7fd297845"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag indicating if a flush operation is in progress. <br /></td></tr>
<tr class="separator:ae601748dc672ec6bdc000ed7fd297845"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41b1c2c0897e7479d5391dd84ff9c780" id="r_a41b1c2c0897e7479d5391dd84ff9c780"><td class="memItemLeft" align="right" valign="top"><a id="a41b1c2c0897e7479d5391dd84ff9c780" name="a41b1c2c0897e7479d5391dd84ff9c780"></a>
thread&#160;</td><td class="memItemRight" valign="bottom"><b>compact_main_thread</b></td></tr>
<tr class="separator:a41b1c2c0897e7479d5391dd84ff9c780"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37b506a725a7971806041b2e4852d3a2" id="r_a37b506a725a7971806041b2e4852d3a2"><td class="memItemLeft" align="right" valign="top"><a id="a37b506a725a7971806041b2e4852d3a2" name="a37b506a725a7971806041b2e4852d3a2"></a>
thread&#160;</td><td class="memItemRight" valign="bottom"><b>flush_thread</b></td></tr>
<tr class="memdesc:a37b506a725a7971806041b2e4852d3a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Threads for compaction and flushing operations. <br /></td></tr>
<tr class="separator:a37b506a725a7971806041b2e4852d3a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Manages data storage and retrieval, supporting operations like compaction, flushing, and concurrency control. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a4703c80e6969d33565ea340f768fdadf" name="a4703c80e6969d33565ea340f768fdadf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4703c80e6969d33565ea340f768fdadf">&#9670;&#160;</a></span>Database()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Database::Database </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor for the <a class="el" href="classDatabase.html" title="Manages data storage and retrieval, supporting operations like compaction, flushing,...">Database</a> class. </p>
<p>Initializes the database by setting up necessary structures and background tasks.</p>
<p>This constructor sets up Bloom filters, initializes directories, prepares the WAL, and starts background threads for compaction and flushing. It ensures the database is ready for operation by setting the initial levels and performing any necessary compactions. </p>

</div>
</div>
<a id="a84d399a2ad58d69daab9b05330e1316d" name="a84d399a2ad58d69daab9b05330e1316d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84d399a2ad58d69daab9b05330e1316d">&#9670;&#160;</a></span>~Database()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Database::~Database </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor for the <a class="el" href="classDatabase.html" title="Manages data storage and retrieval, supporting operations like compaction, flushing,...">Database</a> class. </p>
<p>Destructor that cleans up resources and terminates background threads.</p>
<p>This destructor ensures the database is properly cleaned up when it is destroyed, releasing resources such as semaphores and threads. It sets the destroy flag to stop the FLUSH and compaction threads. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ae03669ca94ae3523dfbe84e796323df6" name="ae03669ca94ae3523dfbe84e796323df6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae03669ca94ae3523dfbe84e796323df6">&#9670;&#160;</a></span>append_to_WAL()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Database::append_to_WAL </td>
          <td>(</td>
          <td class="paramtype">string &amp;</td>          <td class="paramname"><span class="paramname"><em>key</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string &amp;</td>          <td class="paramname"><span class="paramname"><em>val</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Appends a key-value pair to the WAL. </p>
<p>Appends a key-value pair to the Write-Ahead Log (WAL).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>The key to append. </td></tr>
    <tr><td class="paramname">value</td><td>The value to append.</td></tr>
  </table>
  </dd>
</dl>
<p>This function writes a key-value pair to the WAL, including the lengths of both the key and value, followed by the actual data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>The key to be written to the WAL. </td></tr>
    <tr><td class="paramname">val</td><td>The value to be written to the WAL. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8dea3456407995ff774ae36f0fbcbb30" name="a8dea3456407995ff774ae36f0fbcbb30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8dea3456407995ff774ae36f0fbcbb30">&#9670;&#160;</a></span>binary_search()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Database::binary_search </td>
          <td>(</td>
          <td class="paramtype">ifstream &amp;</td>          <td class="paramname"><span class="paramname"><em>In</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ifstream &amp;</td>          <td class="paramname"><span class="paramname"><em>metadata</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>entries</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string &amp;</td>          <td class="paramname"><span class="paramname"><em>key</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string &amp;</td>          <td class="paramname"><span class="paramname"><em>value</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Performs a binary search within a file stream for a given key. </p>
<p>Performs binary search on the data file using the metadata file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">In</td><td>The primary input file stream. </td></tr>
    <tr><td class="paramname">secondary</td><td>An optional secondary file stream. </td></tr>
    <tr><td class="paramname">entries</td><td>The number of entries in the stream. </td></tr>
    <tr><td class="paramname">key</td><td>The key to search for. </td></tr>
    <tr><td class="paramname">value</td><td>The value associated with the key, if found. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the key is found; otherwise, false.</dd></dl>
<p>This function performs a binary search over a data file using the metadata file, which contains the indexes of each string in the data file. It returns true if the key is found, false otherwise.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">In</td><td>Input file stream for the data file. </td></tr>
    <tr><td class="paramname">metadata</td><td>Input file stream for the metadata file. </td></tr>
    <tr><td class="paramname">entries</td><td>Total number of entries in the data file. </td></tr>
    <tr><td class="paramname">key</td><td>The key to be searched for. </td></tr>
    <tr><td class="paramname">value</td><td>The value associated with the key, returned if found. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the key was found, false otherwise. </dd></dl>

</div>
</div>
<a id="ab9cfeee48e9e93c6360514ec6f6f9ddb" name="ab9cfeee48e9e93c6360514ec6f6f9ddb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9cfeee48e9e93c6360514ec6f6f9ddb">&#9670;&#160;</a></span>compact()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Database::compact </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>i</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Performs compaction on a specific tier. </p>
<p>Compacts the data in Tier_i and merges it into Tier_i+1.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tier</td><td>The tier to compact.</td></tr>
  </table>
  </dd>
</dl>
<p>This function performs the compaction of data in Tier_i, merges the files, and appends the result to Tier_i+1 as a temporary file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>Index of the current tier to be compacted. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a96401acdb58036ac556ca4be9068898c" name="a96401acdb58036ac556ca4be9068898c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96401acdb58036ac556ca4be9068898c">&#9670;&#160;</a></span>compact_main()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Database::compact_main </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Main compaction process. </p>
<p>Main thread for calling compact operations in a loop.</p>
<p>This function continuously monitors the <code>compactid</code> semaphore and initiates compaction operations when required. It also ensures that the threads are properly joined before terminating the function. </p>

</div>
</div>
<a id="aae3bec471572392290a4fddb4aea5c8d" name="aae3bec471572392290a4fddb4aea5c8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae3bec471572392290a4fddb4aea5c8d">&#9670;&#160;</a></span>Find()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Database::Find </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>i</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>j</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string &amp;</td>          <td class="paramname"><span class="paramname"><em>key</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string &amp;</td>          <td class="paramname"><span class="paramname"><em>value</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Searches for a key in the database. </p>
<p>Does bookkeeping and calls binary_search for searching key in the file using binary search.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tier</td><td>The tier to search in. </td></tr>
    <tr><td class="paramname">index</td><td>The index within the tier. </td></tr>
    <tr><td class="paramname">key</td><td>The key to search for. </td></tr>
    <tr><td class="paramname">value</td><td>The value associated with the key, if found. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the key is found; otherwise, false.</dd></dl>
<p>This function calls binary_search for looking for a specific key in the data files of a given tier and file, performs a binary search using metadata, and retrieves the corresponding value.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>The tier level where the data file is located. </td></tr>
    <tr><td class="paramname">j</td><td>The index of the specific file in the tier. </td></tr>
    <tr><td class="paramname">key</td><td>The key to search for. </td></tr>
    <tr><td class="paramname">value</td><td>The value corresponding to the key if found. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true If the key is found, false otherwise. </dd></dl>

</div>
</div>
<a id="ac3893e2b916c8502668e4014910574a6" name="ac3893e2b916c8502668e4014910574a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3893e2b916c8502668e4014910574a6">&#9670;&#160;</a></span>FLUSH()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Database::FLUSH </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flushes the in-memory table to SSTable storage. </p>
<p>Flushes the memtable to a new sstable on disk.</p>
<p>This function writes the current memtable (in-memory key-value pairs) to a new sstable on disk. It also handles writing the associated metadata and updating the Bloom filter. </p>

</div>
</div>
<a id="a0c7cad2d7102a8e5ff480355e5b90ebf" name="a0c7cad2d7102a8e5ff480355e5b90ebf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c7cad2d7102a8e5ff480355e5b90ebf">&#9670;&#160;</a></span>get_folder()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Database::get_folder </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>i</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">path &amp;</td>          <td class="paramname"><span class="paramname"><em>Tier</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieves the path to a specific tier directory. Creates it if it doesn't exist. </p>
<p>Checks if the i-th tier exists, and if not, creates it and initializes necessary variables.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tier</td><td>The tier number. </td></tr>
    <tr><td class="paramname">dir</td><td>The resulting directory path.</td></tr>
  </table>
  </dd>
</dl>
<p>This function checks the existence of the i-th tier and initializes necessary variables if the tier does not exist.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>Index of the tier. </td></tr>
    <tr><td class="paramname">Tier</td><td>Reference to the tier path. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6b359ece40bb8fd13f0f4b378805089d" name="a6b359ece40bb8fd13f0f4b378805089d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b359ece40bb8fd13f0f4b378805089d">&#9670;&#160;</a></span>initialize_filter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Database::initialize_filter </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>i</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; <a class="el" href="classBloomFilter.html">BloomFilter</a> &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>filter</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">path &amp;</td>          <td class="paramname"><span class="paramname"><em>Tier</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes the Bloom filters for a tier based on its data. </p>
<p>Initializes the <a class="el" href="classBloomFilter.html" title="Implements a probabilistic function with false-positive chances to check whether a key exists in a fi...">BloomFilter</a> for the i-th tier.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tier</td><td>The tier number. </td></tr>
    <tr><td class="paramname">filter</td><td>The Bloom filter vector to initialize. </td></tr>
    <tr><td class="paramname">dir</td><td>The directory path of the tier.</td></tr>
  </table>
  </dd>
</dl>
<p>This function initializes the <a class="el" href="classBloomFilter.html" title="Implements a probabilistic function with false-positive chances to check whether a key exists in a fi...">BloomFilter</a> for the i-th tier by loading data from disk. It reads both data files and their corresponding metadata.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>Index of the tier. </td></tr>
    <tr><td class="paramname">filter</td><td>Reference to the <a class="el" href="classBloomFilter.html" title="Implements a probabilistic function with false-positive chances to check whether a key exists in a fi...">BloomFilter</a> vector for the tier. </td></tr>
    <tr><td class="paramname">Tier</td><td>Reference to the path of the tier. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af0c20552e3b19756fe3232fc7c29a6cd" name="af0c20552e3b19756fe3232fc7c29a6cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0c20552e3b19756fe3232fc7c29a6cd">&#9670;&#160;</a></span>initialize_folder()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Database::initialize_folder </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>i</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes variables based on the data in a tier during database initialization. </p>
<p>Initializes the folder structure for the i-th tier based on existing data files.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tier</td><td>The tier number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if initialization succeeds; otherwise, false.</dd></dl>
<p>This function checks if the folder for the i-th tier exists and initializes it with the necessary data files and BloomFilters.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>Index of the tier. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the tier was successfully initialized, false otherwise. </dd></dl>

</div>
</div>
<a id="ac4fce4cd4bc90cfec102ffaef5d54ba9" name="ac4fce4cd4bc90cfec102ffaef5d54ba9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4fce4cd4bc90cfec102ffaef5d54ba9">&#9670;&#160;</a></span>initialize_memtable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Database::initialize_memtable </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes the in-memory table using the WAL. </p>
<p>Initializes the memtable by loading data from the Write-Ahead Log (WAL).</p>
<p>This function reloads the memtable from the WAL file during database initialization. </p>

</div>
</div>
<a id="a5b3c4d2265b869b532b9c71377fb47a9" name="a5b3c4d2265b869b532b9c71377fb47a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b3c4d2265b869b532b9c71377fb47a9">&#9670;&#160;</a></span>merge_lock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Database::merge_lock </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>i</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Locks the i-th tier for merging data. </p>
<p>This function locks the semaphore for merging data in the i-th tier.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>Index of the tier. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae227b971e349f1f7eef1cfee82ab3228" name="ae227b971e349f1f7eef1cfee82ab3228"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae227b971e349f1f7eef1cfee82ab3228">&#9670;&#160;</a></span>merge_unlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Database::merge_unlock </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>i</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unlocks the i-th tier after merging data. </p>
<p>This function releases the lock for merging data in the i-th tier.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>Index of the tier. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3eb3a515e35ec6e84763504785b410fd" name="a3eb3a515e35ec6e84763504785b410fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3eb3a515e35ec6e84763504785b410fd">&#9670;&#160;</a></span>push_semaphores()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Database::push_semaphores </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pushes semaphore configurations for new tiers and threads. </p>
<p>Pushes new semaphores for managing writers, readers, and mergers.</p>
<p>This function initializes and pushes new semaphores for managing operations in the database. These semaphores are used for mutual exclusion and synchronization of writing, reading, and merging. </p>
<p>&lt; Pushes semaphores for managing mergers, writers, readers</p>
<p>&lt; Stores the number of writers and readers respectively</p>
<p>&lt; Check if the obtained semaphores are valid</p>

</div>
</div>
<a id="a58f41f1cfa2f8a7d88521c421cf4193b" name="a58f41f1cfa2f8a7d88521c421cf4193b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58f41f1cfa2f8a7d88521c421cf4193b">&#9670;&#160;</a></span>read_lock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Database::read_lock </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>i</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Locks the i-th tier for reading. </p>
<p>This function provides mutual exclusion between readers and ensures that if there are readers, writers will be blocked.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>Index of the tier. </td></tr>
  </table>
  </dd>
</dl>
<p>&lt; If there is at least one reader, wait for writers to complete</p>

</div>
</div>
<a id="aeccfa14ac4500da2405b2e495612a8b1" name="aeccfa14ac4500da2405b2e495612a8b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeccfa14ac4500da2405b2e495612a8b1">&#9670;&#160;</a></span>read_unlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Database::read_unlock </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>i</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unlocks the i-th tier for reading. </p>
<p>This function releases the read lock on the i-th tier and signals writers if there are no readers left.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>Index of the tier. </td></tr>
  </table>
  </dd>
</dl>
<p>&lt; If there are no readers, signal to writers</p>

</div>
</div>
<a id="a3d5023c6cbe44ef7158e80590a3e1ed2" name="a3d5023c6cbe44ef7158e80590a3e1ed2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d5023c6cbe44ef7158e80590a3e1ed2">&#9670;&#160;</a></span>Rename()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Database::Rename </td>
          <td>(</td>
          <td class="paramtype">path &amp;</td>          <td class="paramname"><span class="paramname"><em>folder</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">path &amp;</td>          <td class="paramname"><span class="paramname"><em>folder1</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>i</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Renames files based on the nomenclature of the specified tier. </p>
<p>Renames the temporary files to actual files and increments the <code>levels_main</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">oldPath</td><td>The current file path. </td></tr>
    <tr><td class="paramname">newPath</td><td>The new file path. </td></tr>
    <tr><td class="paramname">tier</td><td>The tier number.</td></tr>
  </table>
  </dd>
</dl>
<p>This function renames the temporary data and metadata files to their actual names and increments the <code>levels_main</code> for the specified tier.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">folder</td><td>Path to the source folder containing temporary files. </td></tr>
    <tr><td class="paramname">folder1</td><td>Path to the destination folder. </td></tr>
    <tr><td class="paramname">i</td><td>Index of the tier. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2684d861b0f4d1accce7fdef3cd4c7c5" name="a2684d861b0f4d1accce7fdef3cd4c7c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2684d861b0f4d1accce7fdef3cd4c7c5">&#9670;&#160;</a></span>write_lock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Database::write_lock </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>i</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Locks the i-th tier for writing. </p>
<p>This function provides mutual exclusion between multiple writers to the i-th tier. It waits for any ongoing reader operations to complete if this is the first writer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>Index of the tier. </td></tr>
  </table>
  </dd>
</dl>
<p>&lt; Mutual exclusion between writers</p>
<p>&lt; If there is at least one writer, wait for readers to complete</p>
<p>&lt; Lock for writers</p>

</div>
</div>
<a id="ab503f896cf02040888e0dd41e6b0ad52" name="ab503f896cf02040888e0dd41e6b0ad52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab503f896cf02040888e0dd41e6b0ad52">&#9670;&#160;</a></span>write_unlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Database::write_unlock </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>i</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unlocks the i-th tier for writing. </p>
<p>This function releases the write lock on the i-th tier. It updates the number of writers and signals the readers if there are no writers left.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>Index of the tier. </td></tr>
  </table>
  </dd>
</dl>
<p>&lt; If there are no writers, signal to readers</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="database_8h_source.html">database.h</a></li>
<li><b>database.cpp</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
